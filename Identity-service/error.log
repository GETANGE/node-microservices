{"cause":{"code":"ERR_INVALID_URL","input":"iLoveJS://${MONGO_HOST}:${MONGO_PORT}"},"errorLabelSet":{},"level":"error","message":"Mongo connection error Unable to parse ${MONGO_HOST}:${MONGO_PORT} with URL","service":"identity-service","stack":"MongoRuntimeError: Unable to parse ${MONGO_HOST}:${MONGO_PORT} with URL\n    at new HostAddress (/home/emmanuel/Desktop/Projects/node-microservices/Identity-service/node_modules/.pnpm/mongodb@6.16.0/node_modules/mongodb/lib/utils.js:715:34)\n    at fromString (/home/emmanuel/Desktop/Projects/node-microservices/Identity-service/node_modules/.pnpm/mongodb@6.16.0/node_modules/mongodb/lib/utils.js:757:16)\n    at Array.map (<anonymous>)\n    at parseOptions (/home/emmanuel/Desktop/Projects/node-microservices/Identity-service/node_modules/.pnpm/mongodb@6.16.0/node_modules/mongodb/lib/connection_string.js:206:45)\n    at new MongoClient (/home/emmanuel/Desktop/Projects/node-microservices/Identity-service/node_modules/.pnpm/mongodb@6.16.0/node_modules/mongodb/lib/mongo_client.js:52:61)\n    at NativeConnection.createClient (/home/emmanuel/Desktop/Projects/node-microservices/Identity-service/node_modules/.pnpm/mongoose@8.14.1/node_modules/mongoose/lib/drivers/node-mongodb-native/connection.js:328:14)\n    at NativeConnection.openUri (/home/emmanuel/Desktop/Projects/node-microservices/Identity-service/node_modules/.pnpm/mongoose@8.14.1/node_modules/mongoose/lib/connection.js:1071:34)\n    at Mongoose.connect (/home/emmanuel/Desktop/Projects/node-microservices/Identity-service/node_modules/.pnpm/mongoose@8.14.1/node_modules/mongoose/lib/mongoose.js:450:15)\n    at file:///home/emmanuel/Desktop/Projects/node-microservices/Identity-service/src/server.js:21:6\n    at ModuleJob.run (node:internal/modules/esm/module_job:218:25)","timestamp":"2025-05-01T13:10:40.812Z"}
{"errorLabelSet":{},"level":"error","message":"connect ECONNREFUSED 127.0.0.1:27017","reason":{"commonWireVersion":0,"compatible":true,"heartbeatFrequencyMS":10000,"localThresholdMS":15,"logicalSessionTimeoutMinutes":null,"maxElectionId":null,"maxSetVersion":null,"servers":{"localhost:27017":{"$clusterTime":null,"address":"localhost:27017","arbiters":[],"electionId":null,"error":{"beforeHandshake":false,"errorLabelSet":{}},"hosts":[],"iscryptd":false,"lastUpdateTime":29452010,"lastWriteDate":0,"logicalSessionTimeoutMinutes":null,"maxBsonObjectSize":null,"maxMessageSizeBytes":null,"maxWireVersion":0,"maxWriteBatchSize":null,"me":null,"minRoundTripTime":0,"minWireVersion":0,"passives":[],"primary":null,"roundTripTime":-1,"setName":null,"setVersion":null,"tags":{},"topologyVersion":null,"type":"Unknown"}},"setName":null,"stale":false,"type":"Unknown"},"service":"identity-service","stack":"MongooseServerSelectionError: connect ECONNREFUSED 127.0.0.1:27017\n    at _handleConnectionErrors (/home/emmanuel/Desktop/Projects/node-microservices/Identity-service/node_modules/.pnpm/mongoose@8.14.1/node_modules/mongoose/lib/connection.js:1165:11)\n    at NativeConnection.openUri (/home/emmanuel/Desktop/Projects/node-microservices/Identity-service/node_modules/.pnpm/mongoose@8.14.1/node_modules/mongoose/lib/connection.js:1096:11)","timestamp":"2025-05-01T15:08:41.093Z"}
{"errorLabelSet":{},"level":"error","message":"connect ECONNREFUSED 127.0.0.1:27017","reason":{"commonWireVersion":0,"compatible":true,"heartbeatFrequencyMS":10000,"localThresholdMS":15,"logicalSessionTimeoutMinutes":null,"maxElectionId":null,"maxSetVersion":null,"servers":{"localhost:27017":{"$clusterTime":null,"address":"localhost:27017","arbiters":[],"electionId":null,"error":{"beforeHandshake":false,"errorLabelSet":{}},"hosts":[],"iscryptd":false,"lastUpdateTime":29629154,"lastWriteDate":0,"logicalSessionTimeoutMinutes":null,"maxBsonObjectSize":null,"maxMessageSizeBytes":null,"maxWireVersion":0,"maxWriteBatchSize":null,"me":null,"minRoundTripTime":0,"minWireVersion":0,"passives":[],"primary":null,"roundTripTime":-1,"setName":null,"setVersion":null,"tags":{},"topologyVersion":null,"type":"Unknown"}},"setName":null,"stale":false,"type":"Unknown"},"service":"identity-service","stack":"MongooseServerSelectionError: connect ECONNREFUSED 127.0.0.1:27017\n    at _handleConnectionErrors (/home/emmanuel/Desktop/Projects/node-microservices/Identity-service/node_modules/.pnpm/mongoose@8.14.1/node_modules/mongoose/lib/connection.js:1165:11)\n    at NativeConnection.openUri (/home/emmanuel/Desktop/Projects/node-microservices/Identity-service/node_modules/.pnpm/mongoose@8.14.1/node_modules/mongoose/lib/connection.js:1096:11)","timestamp":"2025-05-01T15:11:38.246Z"}
{"level":"error","message":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at file:///home/emmanuel/Desktop/Projects/node-microservices/Identity-service/src/server.js:36:16\n    at Layer.handleRequest (/home/emmanuel/Desktop/Projects/node-microservices/Identity-service/node_modules/.pnpm/router@2.2.0/node_modules/router/lib/layer.js:152:17)\n    at trimPrefix (/home/emmanuel/Desktop/Projects/node-microservices/Identity-service/node_modules/.pnpm/router@2.2.0/node_modules/router/index.js:342:13)\n    at /home/emmanuel/Desktop/Projects/node-microservices/Identity-service/node_modules/.pnpm/router@2.2.0/node_modules/router/index.js:297:9\n    at processParams (/home/emmanuel/Desktop/Projects/node-microservices/Identity-service/node_modules/.pnpm/router@2.2.0/node_modules/router/index.js:582:12)\n    at next (/home/emmanuel/Desktop/Projects/node-microservices/Identity-service/node_modules/.pnpm/router@2.2.0/node_modules/router/index.js:291:5)\n    at urlencodedParser (/home/emmanuel/Desktop/Projects/node-microservices/Identity-service/node_modules/.pnpm/body-parser@2.2.0/node_modules/body-parser/lib/types/urlencoded.js:68:7)\n    at Layer.handleRequest (/home/emmanuel/Desktop/Projects/node-microservices/Identity-service/node_modules/.pnpm/router@2.2.0/node_modules/router/lib/layer.js:152:17)\n    at trimPrefix (/home/emmanuel/Desktop/Projects/node-microservices/Identity-service/node_modules/.pnpm/router@2.2.0/node_modules/router/index.js:342:13)","service":"identity-service","timestamp":"2025-05-02T09:26:41.131Z"}
{"level":"error","message":"ReferenceError: Cannot access 'expiresAt' before initialization\n    at generateToken (file:///home/emmanuel/Desktop/Projects/node-microservices/Identity-service/src/utils/generateToken.js:13:42)\n    at userRegistration (file:///home/emmanuel/Desktop/Projects/node-microservices/Identity-service/src/controllers/identity-controller.js:37:48)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","service":"identity-service","timestamp":"2025-05-02T09:30:40.022Z"}
{"level":"error","message":"ReferenceError: Cannot access 'expiresAt' before initialization\n    at generateToken (file:///home/emmanuel/Desktop/Projects/node-microservices/Identity-service/src/utils/generateToken.js:13:42)\n    at file:///home/emmanuel/Desktop/Projects/node-microservices/Identity-service/src/controllers/identity-controller.js:37:48\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","service":"identity-service","timestamp":"2025-05-02T09:32:32.201Z"}
{"level":"error","message":"APIError: User already exists\n    at file:///home/emmanuel/Desktop/Projects/node-microservices/Identity-service/src/controllers/identity-controller.js:28:21\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","service":"identity-service","timestamp":"2025-05-02T09:33:58.031Z"}
{"level":"error","message":"APIError: User already exists\n    at file:///home/emmanuel/Desktop/Projects/node-microservices/Identity-service/src/controllers/identity-controller.js:28:21\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","service":"identity-service","timestamp":"2025-05-02T09:37:39.242Z"}
{"level":"error","message":"APIError: User already exists\n    at file:///home/emmanuel/Desktop/Projects/node-microservices/Identity-service/src/controllers/identity-controller.js:28:21\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","service":"identity-service","timestamp":"2025-05-02T09:48:32.759Z"}
{"level":"error","message":"APIError: User already exists\n    at file:///home/emmanuel/Desktop/Projects/node-microservices/Identity-service/src/controllers/identity-controller.js:28:21\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","service":"identity-service","timestamp":"2025-05-02T09:50:19.286Z"}
{"level":"error","message":"APIError: \"email\" must be a valid email\n    at file:///home/emmanuel/Desktop/Projects/node-microservices/Identity-service/src/controllers/identity-controller.js:15:21\n    at file:///home/emmanuel/Desktop/Projects/node-microservices/Identity-service/src/middleware/errorHandler.js:24:21\n    at Layer.handleRequest (/home/emmanuel/Desktop/Projects/node-microservices/Identity-service/node_modules/.pnpm/router@2.2.0/node_modules/router/lib/layer.js:152:17)\n    at next (/home/emmanuel/Desktop/Projects/node-microservices/Identity-service/node_modules/.pnpm/router@2.2.0/node_modules/router/lib/route.js:157:13)\n    at Route.dispatch (/home/emmanuel/Desktop/Projects/node-microservices/Identity-service/node_modules/.pnpm/router@2.2.0/node_modules/router/lib/route.js:117:3)\n    at handle (/home/emmanuel/Desktop/Projects/node-microservices/Identity-service/node_modules/.pnpm/router@2.2.0/node_modules/router/index.js:435:11)\n    at Layer.handleRequest (/home/emmanuel/Desktop/Projects/node-microservices/Identity-service/node_modules/.pnpm/router@2.2.0/node_modules/router/lib/layer.js:152:17)\n    at /home/emmanuel/Desktop/Projects/node-microservices/Identity-service/node_modules/.pnpm/router@2.2.0/node_modules/router/index.js:295:15\n    at processParams (/home/emmanuel/Desktop/Projects/node-microservices/Identity-service/node_modules/.pnpm/router@2.2.0/node_modules/router/index.js:582:12)\n    at next (/home/emmanuel/Desktop/Projects/node-microservices/Identity-service/node_modules/.pnpm/router@2.2.0/node_modules/router/index.js:291:5)","service":"identity-service","timestamp":"2025-05-02T09:50:52.567Z"}
{"level":"error","message":"APIError: User already exists\n    at file:///home/emmanuel/Desktop/Projects/node-microservices/Identity-service/src/controllers/identity-controller.js:28:21\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","service":"identity-service","timestamp":"2025-05-02T09:53:16.022Z"}
{"level":"error","message":"APIError: User already exists\n    at file:///home/emmanuel/Desktop/Projects/node-microservices/Identity-service/src/controllers/identity-controller.js:28:21\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","service":"identity-service","timestamp":"2025-05-02T09:53:29.976Z"}
{"0":"r","1":"e","2":"a","3":"s","4":"o","5":"n","6":":","level":"error","message":"Unhandled Rejection at:","service":"identity-service","timestamp":"2025-05-05T19:37:06.749Z"}
{"0":"r","1":"e","2":"a","3":"s","4":"o","5":"n","6":":","level":"error","message":"Unhandled Rejection at:","service":"identity-service","timestamp":"2025-05-05T19:37:06.752Z"}
